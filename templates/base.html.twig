{% import "macro/encore.html.twig" as encore %}
{#
   This is the base template used as the application layout which contains the
   common elements and decorates all the other templates.
   See https://symfony.com/doc/current/book/templating.html#template-inheritance-and-layouts
#}
<!DOCTYPE html>
<html lang="{{ app.request.locale }}">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <title>{{ app.request.server.get('APP_NAME') }}
        - {% block title %}{{ app.request.server.get('APP_KEYWORD') }}{% endblock %}</title>
    <meta name="description"
          content="{% block meta_description %}{{ app.request.server.get('APP_NAME') ~ 'meta.description'|trans({"%tags%":app.request.server.get('APP_KEYWORD') }) }}{% endblock %}"/>
    <meta name="keywords" content="{% block meta_keyword %}{{ app.request.server.get('APP_KEYWORD') }}{% endblock %}"/>
    {% block stylesheets %}
        {{ encore.encore_absolute_link_tags('css/app') }}
    {% endblock %}

    <link rel="icon" type="image/x-icon" href="{{ app.request.getSchemeAndHttpHost() ~ asset('logo.ico') }}"/>
</head>

<body id="{% block body_id %}{% endblock %}">

{% block header %}
    <header>
        <nav class="navbar navbar-default">
            <div class="container-fluid">
                <!-- Brand and toggle get grouped for better mobile display -->
                <div class="navbar-header">
                    <a class="navbar-brand" href="{{ url('index') }}">
                        {{ app.request.server.get('APP_NAME') }}
                    </a>
                    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse"
                            data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                </div>


                <!-- Collect the nav links, forms, and other content for toggling -->
                <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                    <ul class="nav navbar-nav">
                        <form action="{{ url('search') }}" method="get" class="navbar-form navbar-left">
                            <div class="form-group search-navbar">
                                <input name="q"
                                       class="form-control search-field search-field-load"
                                       id="search_field"
                                       placeholder="{{ 'post.search_for'|trans }}"
                                       autocomplete="off"
                                       autofocus
                                       value="{{ app.request.query.get('q') }}"
                                >
                                <button type="submit" class="btn btn-default searchButton">GO !</button>
                            </div>
                            <div class="switch-div">
                                <label class="Switch o-pen">
                                    <input type="checkbox" name="sort" class="switch-input a-neonToggle" id="toggle"
                                           {% if app.session.get('sort') %}checked{% endif %}>
                                    <span class=" a-neonText -main">
                                    {{ 'search.sort'|trans }}
                                    </span>
                                </label>

                            </div>
                        </form>
                    </ul>
                    <ul class="nav navbar-nav navbar-right">

                        {% block header_navigation_links %}
                            <li>
                                <a class="tags {% if app.request.uri == url('tags') %}active{% endif %}"
                                   href="{{ url('tags') }}">
                                    <i class="fa fa-hashtag" aria-hidden="true"></i> {{ 'manga.tag'|trans }}
                                </a>
                            </li>

                        {% endblock %}

                        <li class="dropdown">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button"
                               aria-expanded="false" id="locales">
                                <i class="fa fa-globe" aria-hidden="true"></i>
                                <span class="caret"></span>
                                <span class="sr-only">{{ 'menu.choose_language'|trans }}</span>
                            </a>

                            <ul class="dropdown-menu locales" role="menu" aria-labelledby="locales">
                                {% for locale in locales() %}
                                    <li {% if app.request.locale == locale.code %}aria-checked="true" class="active"
                                        {% else %}aria-checked="false"{% endif %} role="menuitem"><a
                                                href="{{ url(app.request.get('_route', 'index'), app.request.get('_route_params', [])|merge({_locale: locale.code})) }}">{{ locale.name|capitalize }}</a>
                                    </li>
                                {% endfor %}
                            </ul>
                        </li>
                    </ul>
                </div><!-- /.navbar-collapse -->
            </div><!-- /.container-fluid -->
        </nav>
    </header>
{% endblock %}

<div class="container body-container">
    {% block body %}
        <div id="main" class="col-sm-12">
            {% block main %}{% endblock %}
        </div>
    {% endblock %}
</div>

{% block footer %}
    <footer>
    </footer>
{% endblock %}

{% block javascripts %}
    {{ encore.encore_absolute_script_tags('js/app') }}
{% endblock %}

{# it's not mandatory to set the timezone in localizeddate(). This is done to
   avoid errors when the 'intl' PHP extension is not available and the application
   is forced to use the limited "intl polyfill", which only supports UTC and GMT #}
<!-- Page rendered on {{ 'now'|localizeddate('long', 'long', null, 'UTC') }} -->
</body>
</html>
